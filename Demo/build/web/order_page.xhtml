<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"                    >

    <h:head>        
        <h:outputStylesheet name="css/custom-table.css" /> 
        <h:outputStylesheet name="css/custom-text.css" />
        <h:outputStylesheet name="css/custom-button.css"/> 
        <h:outputStylesheet name="css/custom-dialog-text.css"/>
        <h:outputStylesheet name="css/custom-dialog.css"/>
        <h:outputStylesheet name="css/custom-image.css"/>
        <h:outputStylesheet name="css/product-list.css"/>
    </h:head>
    <h:body>
        <h:form id="myForm2"> 
            <p:commandButton  icon="pi pi-arrow-left" action="#{routingBean.goBacktoPage()}"  style="color: black;background-color: #fff;border: #fff"    />
            <p:dataGrid id="dataScroller7" value="#{userBean.userOrders}"   var="order"  style="margin: 30px;">
                <p:card  style="margin-right: 30px;margin-bottom:  30px;margin-top: 30px;margin-left:150px;background-color: whitesmoke">

                    <div class="product-list-item  custom-cart-text " >
                        <h:outputText value="Order Number "/>
                        <h:outputText value=" ##{order.number}"  style="margin-left: 15px;  color: #ff3333"/>

                    </div>

                    <div class="product-info-left  custom-cart-text-desc">
                        <h:outputText  value="Order Details"  style="color: red"/>
                    </div>

                    <div class="product-info-left  custom-empty-desc" style="margin-top:20px;margin-bottom: 30px;margin-left: 25px">
                        <p:chip >
                            <i class="pi pi-user" style="margin-right: 5px;color: black"></i>
                            <h:outputText  value="Username : #{order.username}"/>
                        </p:chip>
                    </div>
                    <div style="margin-top: 20px;margin-bottom: 20px;margin-left: 25px">
                        <i class="pi pi-check-circle" style="font-weight:800; margin-right:10px;color: green"></i>
                        <h:outputText  value="Sipariş tamamlandı" style="font-weight: 800;margin-bottom:7px"/>
                    </div>
                    <div class="product-list-item custom-cart-text-desc">
                        <p:inputText readonly="true" size="15" style="margin-left: 20px"  id="float-input" value="#{order.createdAt}" />
                    </div>
                    <div class="product-list-item">
                        <h:outputText style="margin-left:20px;font-size:30px;color: black;font-weight:500"  value="#{order.total_price}"/>
                        <i class="pi pi-dollar" style="margin-right:20px;margin-top:6px;font-size: 2rem;color:green"></i>
                        <h:commandButton  value="View"   style="font-size:17px;font-weight: bold;background-color: white;padding: 7px;margin-left: 10px;color:black;border-radius: 5px;"  action="#{userBean.viewOrderItems(order.id)}"   />   

                    </div>


                </p:card>
            </p:dataGrid>


            <p:dialog id="orderItemsDialog" header="Order Products" widgetVar="orderItemsDialog" height="700"   modal="true" >
                <h:dataTable value="#{userBean.selectedOrderItems}" var="orderItem" >
                    <h:column>
                        <p:outputLabel value="Product Name: #{orderItem.name}"  styleClass="custom-cart-text" style="color: crimson;font-size: 20px"/>
                    </h:column>
                    <h:column>
                        <p:inputText readonly="true" size="1"  id="float-input"  value="#{orderItem.quantity}" styleClass="custom-cart-text" style="font-size: 20px"/>
                    </h:column>
                    <h:column>
                        <p:rating value="#{orderItem.rating}"  readonly="true" style="margin: 15px"/>
                    </h:column>
                    <h:column>  
                        <p:graphicImage value="#{orderItem.imagePath}" alt="Resim Yok"  style="width: 220px;height: 250px;border: 1px solid activecaption;border-radius: 10px "/>
                    </h:column>

                    <h:column>
                        <p:outputLabel value="#{orderItem.price}" style="margin-left:20px;font-size: 40px;color: black;font-weight: 700"/>
                        <i class="pi pi-dollar" style="margin-right:10px;font-size: 2rem;color:green"></i>
                    </h:column>
                </h:dataTable>
            </p:dialog>

        </h:form>

    </h:body>
</html>
